<h1>Watermule Client</h1>

<div class="p-grid">
  <div class="p-col-10">
    <h2>Stammdaten</h2>
    <p-tabView>
      <p-tabPanel header="Knoten">
        <p-table [value]="nodes" responsiveLayout="scroll">
          <ng-template pTemplate="header">
            <tr>
              <th>Schlüssel</th>
              <th>Name</th>
              <th>Beschreibung</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-node>
            <tr>
              <td>{{node.id}}</td>
              <td>{{node.name}}</td>
              <td>{{node.description}}</td>
            </tr>
          </ng-template>
        </p-table>
        <p-button label="Neu" (onClick)="onNodeNew()"></p-button>
      </p-tabPanel>

      <p-tabPanel header="Geräte">
        <p-table [value]="devices" responsiveLayout="scroll">
          <ng-template pTemplate="header">
            <tr>
              <th>Schlüssel</th>
              <th>Knoten</th>
              <th>Name</th>
              <th>Beschreibung</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-device>
            <tr>
              <td>{{device.id}}</td>
              <td>{{device.node_id}}</td>
              <td>{{device.name}}</td>
              <td>{{device.description}}</td>
            </tr>
          </ng-template>
        </p-table>
        <p-button label="Neu" (onClick)="onDeviceNew()"></p-button>
      </p-tabPanel>

      <p-tabPanel header="Kanäle">
        <p-table [value]="channels" responsiveLayout="scroll">
          <ng-template pTemplate="header">
            <tr>
              <th>Schlüssel</th>
              <th>Gerät</th>
              <th>Name</th>
              <th>Beschreibung</th>
              <th>Einheit</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-channel>
            <tr>
              <td>{{channel.id}}</td>
              <td>{{channel.thing_id}}</td>
              <td>{{channel.name}}</td>
              <td>{{channel.description}}</td>
              <td>{{channel.unit}}</td>
            </tr>
          </ng-template>
        </p-table>
        <p-button label="Neu" (onClick)="onChannelNew()"></p-button>
      </p-tabPanel>
    </p-tabView>
  </div>
  <div class="p-col-2">
    <h2>Externe Links</h2>
    <a href="https://watermule.neusta-sd-west.de/auth" target="_blank">User und Authentifizierung</a><br>
    <a href="https://watermule.neusta-sd-west.de/pgadmin" target="_blank">Datenbank Tools</a><br>
    <a href="https://watermule.neusta-sd-west.de/grafana" target="_blank">Grafana</a><br>
    <a href="https://github.com/neusta-sd-west/water-mule" target="_blank">Quellcode und Dokumentation</a>
  </div>
</div>

<p-dialog header="Neuer Knoten" [(visible)]="showThingNodeDlg" [modal]="true" [style]="{width: '50vw'}"
          [draggable]="false" [resizable]="false" styleClass="p-fluid">

  <ng-template pTemplate="content">

    <div class="p-field">
      <label for="inputId">Schlüssel</label>
      <input [(ngModel)]="node.id" id="inputId" pInputText type="text" required autofocus/>
    </div>

    <div class="p-field p-col-12 p-md-4">
      <label for="inputName">Name:</label>
      <input [(ngModel)]="node.name" id="inputName" pInputText type="text"/>
    </div>

    <div class="p-field p-col-12 p-md-4">
      <label for="inputDescription">Beschreibung:</label>
      <input [(ngModel)]="node.description" id="inputDescription" pInputText type="text"/>
    </div>

  </ng-template>

  <ng-template pTemplate="footer">
    <p-button icon="pi pi-check" (click)="onSaveNode()" label="Ok" styleClass="p-button-text"></p-button>
  </ng-template>
</p-dialog>


